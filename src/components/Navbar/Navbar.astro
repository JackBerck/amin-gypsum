---
import NavLink from "./NavLink.astro";
---

<header
  class="absolute top-0 left-0 w-full flex items-center z-10 transition duration-200"
  id="header"
>
  <div class="container">
    <div class="flex items-center justify-between relative">
      <div class="px-4">
        <a
          href="./index.html/#hero"
          class="font-bold text-lg text-primary block py-6 font-jaro"
          >Amin Gypsum</a
        >
      </div>
      <div class="flex items-center px-4">
        <button
          id="hamburger"
          name="hamburger"
          type="button"
          class="block absolute right-4 lg:hidden"
        >
          <span
            class="hamburger-line transition duration-300 ease-in-out origin-top-left"
          ></span><span
            class="hamburger-line transition duration-300 ease-in-out"
          ></span><span
            class="hamburger-line transition duration-300 ease-in-out origin-bottom-left"
          ></span>
        </button>
        <nav
          id="nav-menu"
          class="hidden absolute font-poppins py-5 bg-white shadow-lg rounded-lg w-full right-0 left-0 top-full lg:block lg:static lg:bg-transparent lg:max-w-full lg:shadow-none lg:rounded-none"
        >
          <ul class="block lg:flex">
            <li class="group flex items-center">
              <NavLink href="/">Beranda</NavLink>
            </li>
            <li class="group flex items-center">
              <NavLink href="/products">Produk</NavLink>
            </li>
            <li class="group flex items-center">
              <NavLink href="/projects">Proyek</NavLink>
            </li>
            <li class="group flex items-center">
              <NavLink href="/services">Layanan</NavLink>
            </li>
            <li class="group flex items-center">
              <NavLink href="/contact-us">Hubungi Kami</NavLink>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

<style>
  .navbar-fixed {
    @apply fixed z-[999] bg-white bg-opacity-70 backdrop-blur-sm;
    box-shadow: inset 0 -1px 0 0 rgba(0, 0, 0, 0.2);
  }

  .hamburger-line {
    @apply w-[30px] h-[2px] my-2 block bg-dark;
  }

  .hamburger-active > span:first-child {
    @apply rotate-45;
  }
  .hamburger-active > span:nth-child(2) {
    @apply scale-0;
  }
  .hamburger-active > span:last-child {
    @apply -rotate-45;
  }

  #dark-toggle:checked ~ label div.toggle-circle {
    @apply translate-x-3;
  }
</style>

<script>
  // Hamburger
  const hamburger = document.querySelector("#hamburger");
  const navMenu = document.querySelector("#nav-menu");
  hamburger.addEventListener("click", function () {
    hamburger.classList.toggle("hamburger-active");
    navMenu.classList.toggle("hidden");
  });

  // Navbar Fixed
  window.onscroll = function () {
    const header = document.querySelector("header");
    const fixedNav = header.offsetTop;

    if (window.scrollY > fixedNav) {
      if (header.classList.contains("absolute")) {
        header.classList.remove("absolute");
      }
      header.classList.add("navbar-fixed");
    } else {
      if (!header.classList.contains("absolute")) {
        header.classList.add("absolute");
      }
      header.classList.remove("navbar-fixed");
    }
  };
</script>
